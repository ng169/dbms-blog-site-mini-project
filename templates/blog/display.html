{% extends 'base.html' %}

{% block title %}{{blog.title}}{% endblock %}

{% block content %}


<div class="container mt-5 shadow min-vh-100 p-4">
    <div class="row">
        <div class="col-12 pt-2">
            <h1>{{blog.title}}</h1>
            <h3>{{blog.subtitle}}</h3>
            <hr>
        </div>
        <div class="col-8">
            <div class="mt-2 mb-3">
                <p>Posted by
                    <a class="link-dark" href="{{ url_for('profile',user_id=blog.uid) }}">
                        <em>{{blog.name}}</em></a>
                </p>
                <p>Date added: {{blog.date_added|strftime}}</p>
                <p>Date modified: {{blog.date_modified|strftime}} </p>
                <p>Number of bookmarks: {{blog.num_of_bookmarks}}</p>
                <h5>Categories</h5>
                <ul class="list-group list-group-horizontal">
                    {% for category in categories %}
                    <li class="list-group-item"> {{category.name}}</li>
                    {% endfor %}
                </ul>
                <div class="mt-4">
                    {% if bkm_status == 1 %}
                    <p class="display-7">
                        <a href="{{url_for('del_bookmarks',blog_id=blog.blog_id)}}">
                            Remove bookmark <i class="fa-sharp fa-solid fa-bookmark"></i>
                        </a>
                    </p>
                    {% endif %}

                    {% if bkm_status == 2 %}
                    <p class="display-7">
                        <a href="{{url_for('add_bookmarks',blog_id = blog.blog_id)}}">
                            Add bookmark <i class="fa-regular fa-bookmark"></i>
                        </a>
                    </p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-4 d-flex flex-column justify-content-center">
            {% if current_user.is_authenticated and current_user.id == blog.author_id %}
            <a href="{{url_for('edit_blog',blog_id = blog.blog_id)}}">
                <button class="btn btn-outline-primary mb-3">

                    Edit blog <i class="fa-solid fa-pen"></i>
                </button>
            </a>
            <a href="{{url_for('delete_blog',blog_id = blog.blog_id)}}">
                <button class="btn btn-outline-danger mt-3">
                    Delete blog <i class="fa-solid fa-trash"></i>
                </button>
            </a>
            {% else %}
            {% if current_user.is_authenticated %}
            <a href="{{url_for('add_comment',blog_id = blog.blog_id )}}">
                <button class="btn btn-outline-primary mb-3">
                    Add Comment <i class="fa-regular fa-plus"></i>
                </button>
            </a>
            <a href="{{url_for('home')}}">
                <button class="btn btn-outline-primary mb-3">
                    Back to home <i class="fa-sharp fa-solid fa-house"></i></i>
                </button>
            </a>
            {% endif %}
            {% endif %}
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-8 border-end border-2">
            {{blog.content|safe}}
        </div>
        <div class="col-4">

            <h4>Comments</h4>
            {% if comments %}
            {% for comment in comments %}
            <div class="mt-2 ms-2">
                {% if current_user.is_authenticated and current_user.id == comment.uid %}
                <p>{{comment.content}}<br>By {{comment.name}} (You)</p>
                <a href="{{url_for('delete_comment', comment_id = comment.id,blog_id = blog.blog_id) }}"> Delete âœ˜</a>
                {% else %}
                <p>{{comment.content}}<br>By {{comment.name}} </p>
                {% endif %}

            </div>
            <hr>
            {% endfor %}
            {% else %}
            <div class="mt-2 ms-2">
                No comments added.
            </div>
            {% endif %}
        </div>
    </div>

</div>

{% endblock %}

